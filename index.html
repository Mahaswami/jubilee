<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Jubilee by isaiah</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Jubilee</h1>
        <p class="header">A rack server with Vert.x awesomeness builtin</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/isaiah/jubilee/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/isaiah/jubilee/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/isaiah/jubilee">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/isaiah">isaiah</a></p>


      </header>
      <section>
        <p><a href="https://travis-ci.org/isaiah/jubilee"><img src="https://travis-ci.org/isaiah/jubilee.png?branch=master" alt="Build Status"></a></p>

<h1>
<a name="jubilee-server" class="anchor" href="#jubilee-server"><span class="octicon octicon-link"></span></a>Jubilee server</h1>

<blockquote>
<p>"We need a web framework for Vertx.", you said.</p>

<p>"But why not use Vertx in your Rails applications, it's the most productive web framework ever created."</p>
</blockquote>

<p>The Answer is Jubilee, a rack server with <a href="http://vertx.io">vertx 2.0</a> awesomeness builtin. Check out the
<a href="http://192.241.201.68:8080/">demo</a> <a href="https://github.com/isaiah/jubilee/tree/master/examples/chatapp">application</a>.</p>

<h2>
<a name="why-another-rack-server" class="anchor" href="#why-another-rack-server"><span class="octicon octicon-link"></span></a>Why another rack server?</h2>

<blockquote>
<p>"Vert.x is a lightweight, high performance application platform for the JVM
that's designed for modern mobile, web, and enterprise applications."
     - vertx.io site</p>
</blockquote>

<p>In short, Vertx is nodejs on the JVM, only much more faster, checkout the awesome
<a href="http://vertxproject.wordpress.com/2012/05/09/vert-x-vs-node-js-simple-http-benchmarks/">benchmarks</a></p>

<p>By using Vertx, jubilee inherent advantages in terms of performance, and all
the other cool features of Vertx:</p>

<ul>
<li><a href="https://github.com/isaiah/jubilee/wiki/Event-Bus">EventBus</a></li>
<li><a href="https://github.com/isaiah/jubilee/wiki/SharedData">SharedData</a></li>
<li><a href="https://github.com/isaiah/jubilee/wiki/Clustering">Clustering</a></li>
</ul><h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<pre><code>$ jruby -S gem install jubilee
</code></pre>

<p>Jubilee requires JRuby 1.7.5 or later, and JDK 7+</p>

<h2>
<a name="get-started" class="anchor" href="#get-started"><span class="octicon octicon-link"></span></a>Get started</h2>

<pre><code>$ cd a-rack-app
$ jruby -S jubilee
</code></pre>

<h2>
<a name="setup" class="anchor" href="#setup"><span class="octicon octicon-link"></span></a>Setup</h2>

<p>If you use bundler, you might want to add <code>jubilee</code> to your Gemfile,
this is also required if you want use rails http streaming,</p>

<pre><code>$ jubilee
</code></pre>

<p>or if you prefer to use the rack handler(e.g. development) use:</p>

<pre><code>$ rails s jubilee
</code></pre>

<p>or</p>

<pre><code>$ rackup -s jubilee
</code></pre>

<h1>
<a name="event-bus" class="anchor" href="#event-bus"><span class="octicon octicon-link"></span></a>Event Bus</h1>

<p>Event Bus is a pub/sub mechanism, it can be used from server to server, server
to client and client to client, with the same API!</p>

<h2>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h2>

<p>Assume necessary javascript files are loaded in the page (they can be found <a href="https://github.com/isaiah/jubilee/tree/master/examples/client">here</a>),
start jubilee in a rack application with:</p>

<pre><code>$ jubilee --eventbus /eventbus
</code></pre>

<p>In one browser:</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">eb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">vertx</span><span class="p">.</span><span class="nx">EventBus</span><span class="p">(</span><span class="s2">"/eventbus"</span><span class="p">);</span>
<span class="nx">eb</span><span class="p">.</span><span class="nx">registerHandler</span><span class="p">(</span><span class="s2">"test"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>

</pre></div>

<p>In another:</p>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">eb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">vertx</span><span class="p">.</span><span class="nx">EventBus</span><span class="p">(</span><span class="s2">"/eventbus"</span><span class="p">);</span>
<span class="nx">eb</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s2">"test"</span><span class="p">,</span> <span class="s2">"hello, world"</span><span class="p">);</span>
</pre></div>

<p>For more advanced examples, checkout the
<a href="https://github.com/isaiah/jubilee/tree/master/examples/chatapp">chatapp</a>.</p>

<h1>
<a name="performance-tuning" class="anchor" href="#performance-tuning"><span class="octicon octicon-link"></span></a>Performance Tuning</h1>

<h2>
<a name="improving-connection-time" class="anchor" href="#improving-connection-time"><span class="octicon octicon-link"></span></a>Improving connection time</h2>

<p>If you're creating a lot of connections to a Jubilee(Vert.x) server in a short
period of time, e.g. benchmarking with tools like <a href="https://github.com/wg/wrk">wrk</a>,
you may need to tweak some settings in order to avoid the TCP accept queue
getting full. This can result in connections being refused or packets being
dropped during the handshake which can then cause the client to retry.</p>

<p>A classic symptom of this is if you see long connection times just over
3000ms at your client.</p>

<p>How to tune this is operating system specific but in Linux you need to
increase a couple of settings in the TCP / Net config (10000 is an
arbitrarily large number)</p>

<pre lang="shell"><code>sudo sysctl -w net.core.somaxconn=10000
sudo sysctl -w net.ipv4.tcp_max_syn_backlog=10000
</code></pre>

<p>For other operating systems, please consult your operating system
documentation.</p>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>See <a href="https://github.com/isaiah/jubilee/blob/master/LICENSE.txt">LICENSE.txt</a></p>

<h2>
<a name="acknowledgment" class="anchor" href="#acknowledgment"><span class="octicon octicon-link"></span></a>Acknowledgment</h2>

<p>YourKit is kindly supporting Jubilee Server with its full-featured Java Profiler.
YourKit, LLC is the creator of innovative and intelligent tools for profiling
Java and .NET applications. Take a look at YourKit's leading software products:
<a href="http://www.yourkit.com/java/profiler/index.jsp">YourKit Java
Profiler</a> and
<a href="http://www.yourkit.com/.net/profiler/index.jsp">YourKit .NET Profiler</a>.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
